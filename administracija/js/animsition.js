(function(e){"use strict";var t="animsition";var n={init:function(r){r=e.extend({inClass:"fade-in",outClass:"fade-out",inDuration:1500,outDuration:800,linkElement:".animsition-link",loading:true,loadingParentElement:"body",loadingClass:"animsition-loading",unSupportCss:["animation-duration","-webkit-animation-duration","-o-animation-duration"],overlay:false,overlayClass:"animsition-overlay-slide",overlayParentElement:"body"},r);var i=n.supportCheck.call(this,r);if(i===false){if(!("console"in window)){window.console={};window.console.log=function(e){return e}}console.log("Animsition does not support this browser.");return n.destroy.call(this)}var s=n.state.call(this,r);if(s===true){n.addOverlay.call(this,r)}if(r.loading===true){n.addLoading.call(this,r)}return this.each(function(){var i=this;var s=e(this);var o=e(window);var u=s.data(t);if(!u){r=e.extend({},r);s.data(t,{options:r});o.on("load."+t+" pageshow."+t,function(){n.pageIn.call(i)});o.on("unload."+t,function(){});e(r.linkElement).on("click."+t,function(t){t.preventDefault();var r=e(this);n.pageOut.call(i,r)})}})},supportCheck:function(t){var n=e(this);var r=t.unSupportCss;var i=r.length;var s=false;if(i===0){s=true}for(var o=0;o<i;o++){if(typeof n.css(r[o])==="string"){s=true;break}}return s},state:function(t){var n=e(this);var r;if(t.overlay===true||n.data("animsition-overlay")===true){r=true}else{r=false}return r},addOverlay:function(t){e(t.overlayParentElement).prepend('<div class="'+t.overlayClass+'"></div>')},addLoading:function(t){e(t.loadingParentElement).append('<div class="'+t.loadingClass+'"></div>')},removeLoading:function(){var n=e(this);var r=n.data(t).options;var i=e(r.loadingParentElement).children("."+r.loadingClass);i.fadeOut().remove()},pageInClass:function(){var n=e(this);var r=n.data(t).options;var i=n.data("animsition-in");var s;if(typeof i==="string"){s=i}else{s=r.inClass}return s},pageInDuration:function(){var n=e(this);var r=n.data(t).options;var i=n.data("animsition-in-duration");var s;if(typeof i==="number"){s=i}else{s=r.inDuration}return s},pageIn:function(){var r=this;var i=e(this);var s=i.data(t).options;var o=n.pageInClass.call(r);var u=n.pageInDuration.call(r);var a=n.state.call(r,s);if(s.loading===true){n.removeLoading.call(r)}if(a===true){n.pageInOverlay.call(r,o,u)}else{n.pageInBasic.call(r,o,u)}},pageInBasic:function(t,n){var r=e(this);r.css({"animation-duration":n/1e3+"s"}).addClass(t).animateCallback(function(){r.removeClass(t).css({opacity:1})})},pageInOverlay:function(n,r){var i=e(this);var s=i.data(t).options;i.css({opacity:1});e(s.overlayParentElement).children("."+s.overlayClass).css({"animation-duration":r/1e3+"s"}).addClass(n)},pageOutClass:function(n){var r=e(this);var i=r.data(t).options;var s=n.data("animsition-out");var o=r.data("animsition-out");var u;if(typeof s==="string"){u=s}else if(typeof o==="string"){u=o}else{u=i.outClass}return u},pageOutDuration:function(n){var r=e(this);var i=r.data(t).options;var s=n.data("animsition-out-duration");var o=r.data("animsition-out-duration");var u;if(typeof s==="number"){u=s}else if(typeof o==="number"){u=o}else{u=i.outDuration}return u},pageOut:function(r){var i=this;var s=e(this);var o=s.data(t).options;var u=n.pageOutClass.call(i,r);var a=n.pageOutDuration.call(i,r);var f=n.state.call(i,o);var l=r.attr("href");if(f===true){n.pageOutOverlay.call(i,u,a,l)}else{n.pageOutBasic.call(i,u,a,l)}},pageOutBasic:function(t,n,r){var i=e(this);i.css({"animation-duration":n/1e3+"s"}).addClass(t).animateCallback(function(){location.href=r})},pageOutOverlay:function(r,i,s){var o=this;var u=e(this);var a=u.data(t).options;var f=n.pageInClass.call(o);e(a.overlayParentElement).children("."+a.overlayClass).css({"animation-duration":i/1e3+"s"}).removeClass(f).addClass(r).animateCallback(function(){u.css({opacity:0});location.href=s})},destroy:function(){return this.each(function(){var n=e(this);e(window).unbind("."+t);n.css({opacity:1}).removeData(t)})}};e.fn.animateCallback=function(t){var n="animationend webkitAnimationEnd mozAnimationEnd oAnimationEnd MSAnimationEnd";return this.each(function(){e(this).bind(n,function(){e(this).unbind(n);return t.call(this)})})};e.fn.animsition=function(r){if(n[r]){return n[r].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof r==="object"||!r){return n.init.apply(this,arguments)}else{e.error("Method "+r+" does not exist on jQuery."+t)}}})(jQuery)