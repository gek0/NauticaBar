(function(e){e.fn.iframeTracker=function(t){e.iframeTracker.handlersList.push(t);e(this).bind("mouseover",{handler:t},function(e){e.data.handler.over=true;try{e.data.handler.overCallback(this)}catch(t){}}).bind("mouseout",{handler:t},function(t){t.data.handler.over=false;e.iframeTracker.focusRetriever.focus();try{t.data.handler.outCallback(this)}catch(n){}})};e.iframeTracker={focusRetriever:null,focusRetrieved:false,handlersList:[],isIE8AndOlder:false,init:function(){try{if(e.browser.msie==true&&e.browser.version<9){this.isIE8AndOlder=true}}catch(t){try{var n=navigator.userAgent.match(/(msie) ([\w.]+)/i);if(n[2]<9){this.isIE8AndOlder=true}}catch(r){}}e(window).focus();e(window).blur(function(t){e.iframeTracker.windowLoseFocus(t)});e("body").append('<div style="position:fixed; top:0; left:0; overflow:hidden;"><input style="position:absolute; left:-300px;" type="text" value="" id="focus_retriever" readonly="true" /></div>');this.focusRetriever=e("#focus_retriever");this.focusRetrieved=false;e(document).mousemove(function(t){if(document.activeElement&&document.activeElement.tagName=="IFRAME"){e.iframeTracker.focusRetriever.focus();e.iframeTracker.focusRetrieved=true}});if(this.isIE8AndOlder){this.focusRetriever.blur(function(t){t.stopPropagation();t.preventDefault();e.iframeTracker.windowLoseFocus(t)})}if(this.isIE8AndOlder){e("body").click(function(t){e(window).focus()});e("form").click(function(e){e.stopPropagation()});try{e("body").on("click","form",function(e){e.stopPropagation()})}catch(t){console.log("[iframeTracker] Please update jQuery to 1.7 or newer. (exception: "+t.message+")")}}},windowLoseFocus:function(e){for(var t in this.handlersList){if(this.handlersList[t].over==true){try{this.handlersList[t].blurCallback()}catch(n){}}}}};e(document).ready(function(){e.iframeTracker.init()})})(jQuery)