(function(e){e.fn.viewportChecker=function(t){var n={classToAdd:"visible",offset:100,repeat:false,callbackFunction:function(e,t){},scrollHorizontal:false};e.extend(n,t);var r=this,i=!n.scrollHorizontal?e(window).height():e(window).width(),s=navigator.userAgent.toLowerCase().indexOf("webkit")!=-1?"body":"html";this.checkElements=function(){if(!n.scrollHorizontal){var t=e(s).scrollTop(),o=t+i}else{var t=e(s).scrollLeft(),o=t+i}r.each(function(){var r=e(this),i={},s={};if(r.data("add"))s.classToAdd=r.data("add");if(r.data("offset"))s.offset=r.data("offset");if(r.data("repeat"))s.repeat=r.data("repeat");if(r.data("scrollHorizontal"))s.scrollHorizontal=r.data("scrollHorizontal");e.extend(i,n);e.extend(i,s);if(r.hasClass(i.classToAdd)&&!i.repeat){return}var u=!i.scrollHorizontal?Math.round(r.offset().top)+i.offset:Math.round(r.offset().left)+i.offset,a=u+r.height();if(u<o&&a>t){r.addClass(i.classToAdd);i.callbackFunction(r,"add")}else if(r.hasClass(i.classToAdd)&&i.repeat){r.removeClass(i.classToAdd);i.callbackFunction(r,"remove")}})};e(window).bind("load scroll touchmove",this.checkElements);e(window).resize(function(e){i=!n.scrollHorizontal?e.currentTarget.innerHeight:e.currentTarget.innerWidth});this.checkElements();return this}})(jQuery)